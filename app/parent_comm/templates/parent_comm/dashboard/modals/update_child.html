<!-- Update Child Modal -->
<div id="updateChildModalOverlay" class="ucm-modal-overlay">
    <div class="ucm-modal-container">
        <div class="ucm-modal-header">
            <h2 class="ucm-modal-title">
                <i class="fas fa-user-edit"></i>
                Update Child Profile
            </h2>
            <button type="button" class="ucm-modal-close" id="updateChildModalClose" aria-label="Close modal">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="ucm-modal-body">
            <!-- Progress Steps -->
            <div class="ucm-progress-steps">
                <div class="ucm-step ucm-step-active" data-step="1">
                    <div class="ucm-step-number">1</div>
                    <div class="ucm-step-label">Basic Info</div>
                </div>
                <div class="ucm-step" data-step="2">
                    <div class="ucm-step-number">2</div>
                    <div class="ucm-step-label">Medical Info</div>
                </div>
                <div class="ucm-step" data-step="3">
                    <div class="ucm-step-number">3</div>
                    <div class="ucm-step-label">Emergency Contacts</div>
                </div>
            </div>

            <!-- Alert Messages -->
            <div id="updateChildAlertContainer" class="ucm-alert-container"></div>

            <!-- Form -->
            <form id="updateChildForm" novalidate>
                <!-- Hidden field for child ID -->
                <input type="hidden" id="ucmChildId" name="child_id">

                <!-- Step 1: Basic Information -->
                <div class="ucm-form-step ucm-form-step-active" data-step="1">
                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmFirstName" class="ucm-label">
                                First Name <span class="ucm-required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="ucmFirstName" 
                                name="first_name" 
                                class="ucm-input" 
                                required
                                minlength="2"
                                maxlength="50"
                                placeholder="Enter first name"
                            >
                            <span class="ucm-error-message" id="ucmFirstNameError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmLastName" class="ucm-label">
                                Last Name <span class="ucm-required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="ucmLastName" 
                                name="last_name" 
                                class="ucm-input" 
                                required
                                minlength="2"
                                maxlength="50"
                                placeholder="Enter last name"
                            >
                            <span class="ucm-error-message" id="ucmLastNameError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmDateOfBirth" class="ucm-label">
                                Date of Birth <span class="ucm-required">*</span>
                            </label>
                            <input 
                                type="date" 
                                id="ucmDateOfBirth" 
                                name="date_of_birth" 
                                class="ucm-input" 
                                required
                            >
                            <span class="ucm-error-message" id="ucmDateOfBirthError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmGender" class="ucm-label">
                                Gender <span class="ucm-required">*</span>
                            </label>
                            <select id="ucmGender" name="gender" class="ucm-input" required>
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="prefer_not_to_say">Prefer not to say</option>
                            </select>
                            <span class="ucm-error-message" id="ucmGenderError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmGradeLevel" class="ucm-label">Grade Level</label>
                            <input 
                                type="text" 
                                id="ucmGradeLevel" 
                                name="grade_level" 
                                class="ucm-input"
                                placeholder="e.g., 4th Grade"
                            >
                            <span class="ucm-error-message" id="ucmGradeLevelError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmSchoolName" class="ucm-label">School Name</label>
                            <input 
                                type="text" 
                                id="ucmSchoolName" 
                                name="school_name" 
                                class="ucm-input"
                                placeholder="Enter school name"
                            >
                            <span class="ucm-error-message" id="ucmSchoolNameError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmail" class="ucm-label">Email</label>
                            <input 
                                type="email" 
                                id="ucmEmail" 
                                name="email" 
                                class="ucm-input"
                                placeholder="child@example.com"
                            >
                            <span class="ucm-error-message" id="ucmEmailError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmPhone" class="ucm-label">Phone</label>
                            <input 
                                type="tel" 
                                id="ucmPhone" 
                                name="phone" 
                                class="ucm-input"
                                placeholder="+254712345678"
                            >
                            <span class="ucm-error-message" id="ucmPhoneError"></span>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Medical Information -->
                <div class="ucm-form-step" data-step="2">
                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmBloodType" class="ucm-label">Blood Type</label>
                            <select id="ucmBloodType" name="blood_type" class="ucm-input">
                                <option value="">Select blood type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                            <span class="ucm-error-message" id="ucmBloodTypeError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmAllergies" class="ucm-label">Allergies</label>
                            <input 
                                type="text" 
                                id="ucmAllergies" 
                                name="allergies" 
                                class="ucm-input"
                                placeholder="e.g., Peanuts, shellfish"
                            >
                            <span class="ucm-error-message" id="ucmAllergiesError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-12">
                            <label for="ucmMedicalConditions" class="ucm-label">Medical Conditions</label>
                            <textarea 
                                id="ucmMedicalConditions" 
                                name="medical_conditions" 
                                class="ucm-textarea"
                                rows="3"
                                placeholder="List any medical conditions"
                            ></textarea>
                            <span class="ucm-error-message" id="ucmMedicalConditionsError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-12">
                            <label for="ucmMedications" class="ucm-label">Current Medications</label>
                            <textarea 
                                id="ucmMedications" 
                                name="medications" 
                                class="ucm-textarea"
                                rows="3"
                                placeholder="List any current medications"
                            ></textarea>
                            <span class="ucm-error-message" id="ucmMedicationsError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-12">
                            <label for="ucmDietaryRestrictions" class="ucm-label">Dietary Restrictions</label>
                            <input 
                                type="text" 
                                id="ucmDietaryRestrictions" 
                                name="dietary_restrictions" 
                                class="ucm-input"
                                placeholder="e.g., Vegetarian, Gluten-free"
                            >
                            <span class="ucm-error-message" id="ucmDietaryRestrictionsError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmDoctorName" class="ucm-label">Doctor's Name</label>
                            <input 
                                type="text" 
                                id="ucmDoctorName" 
                                name="doctor_name" 
                                class="ucm-input"
                                placeholder="Enter doctor's name"
                            >
                            <span class="ucm-error-message" id="ucmDoctorNameError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmDoctorPhone" class="ucm-label">Doctor's Phone</label>
                            <input 
                                type="tel" 
                                id="ucmDoctorPhone" 
                                name="doctor_phone" 
                                class="ucm-input"
                                placeholder="+254712345678"
                            >
                            <span class="ucm-error-message" id="ucmDoctorPhoneError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-12">
                            <label for="ucmSpecialRequirements" class="ucm-label">Special Requirements</label>
                            <textarea 
                                id="ucmSpecialRequirements" 
                                name="special_requirements" 
                                class="ucm-textarea"
                                rows="3"
                                placeholder="Any special requirements or accommodations needed"
                            ></textarea>
                            <span class="ucm-error-message" id="ucmSpecialRequirementsError"></span>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Emergency Contacts -->
                <div class="ucm-form-step" data-step="3">
                    <h3 class="ucm-section-title">Primary Emergency Contact</h3>
                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact1Name" class="ucm-label">
                                Name <span class="ucm-required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="ucmEmergencyContact1Name" 
                                name="emergency_contact_1_name" 
                                class="ucm-input"
                                required
                                placeholder="Enter contact name"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact1NameError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact1Relationship" class="ucm-label">
                                Relationship <span class="ucm-required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="ucmEmergencyContact1Relationship" 
                                name="emergency_contact_1_relationship" 
                                class="ucm-input"
                                required
                                placeholder="e.g., Mother, Father"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact1RelationshipError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact1Phone" class="ucm-label">
                                Phone <span class="ucm-required">*</span>
                            </label>
                            <input 
                                type="tel" 
                                id="ucmEmergencyContact1Phone" 
                                name="emergency_contact_1_phone" 
                                class="ucm-input"
                                required
                                placeholder="+254712345678"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact1PhoneError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact1Email" class="ucm-label">Email</label>
                            <input 
                                type="email" 
                                id="ucmEmergencyContact1Email" 
                                name="emergency_contact_1_email" 
                                class="ucm-input"
                                placeholder="contact@example.com"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact1EmailError"></span>
                        </div>
                    </div>

                    <h3 class="ucm-section-title ucm-section-title-secondary">Secondary Emergency Contact (Optional)</h3>
                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact2Name" class="ucm-label">Name</label>
                            <input 
                                type="text" 
                                id="ucmEmergencyContact2Name" 
                                name="emergency_contact_2_name" 
                                class="ucm-input"
                                placeholder="Enter contact name"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact2NameError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact2Relationship" class="ucm-label">Relationship</label>
                            <input 
                                type="text" 
                                id="ucmEmergencyContact2Relationship" 
                                name="emergency_contact_2_relationship" 
                                class="ucm-input"
                                placeholder="e.g., Aunt, Uncle"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact2RelationshipError"></span>
                        </div>
                    </div>

                    <div class="ucm-form-row">
                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact2Phone" class="ucm-label">Phone</label>
                            <input 
                                type="tel" 
                                id="ucmEmergencyContact2Phone" 
                                name="emergency_contact_2_phone" 
                                class="ucm-input"
                                placeholder="+254712345678"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact2PhoneError"></span>
                        </div>

                        <div class="ucm-form-group ucm-col-6">
                            <label for="ucmEmergencyContact2Email" class="ucm-label">Email</label>
                            <input 
                                type="email" 
                                id="ucmEmergencyContact2Email" 
                                name="emergency_contact_2_email" 
                                class="ucm-input"
                                placeholder="contact@example.com"
                            >
                            <span class="ucm-error-message" id="ucmEmergencyContact2EmailError"></span>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="ucm-modal-footer">
            <div class="ucm-footer-left">
                <button type="button" class="ucm-btn ucm-btn-secondary" id="updateChildPrevBtn">
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
            </div>
            <div class="ucm-footer-right">
                <button type="button" class="ucm-btn ucm-btn-outline" id="updateChildCancelBtn">
                    Cancel
                </button>
                <button type="button" class="ucm-btn ucm-btn-primary" id="updateChildNextBtn">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button type="submit" form="updateChildForm" class="ucm-btn ucm-btn-success" id="updateChildSubmitBtn" style="display: none;">
                    <i class="fas fa-save"></i> Update Child
                </button>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="updateChildLoadingOverlay" class="ucm-loading-overlay">
            <div class="ucm-spinner"></div>
            <p class="ucm-loading-text">Updating child profile...</p>
        </div>
    </div>
</div>

